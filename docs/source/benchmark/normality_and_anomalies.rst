.. _normality_and_anomalies:

Normality And Anomalies
=======================

* In the benchmark, we define what we call the "normality" state, and the
  "anomaly". When working with models, we call anomaly part of the model
  with overall different properties (e.g. subpart of a graph with different density than the complete graph).
  When working with real datasets, we assume that anomalies are already
  present in the data.

* Anomalies are generated in two steps of the pipeline.

  - Graph and Timeserie anomalies are generated by the "Processor", in GTgen. 
        - Graph anomalies are small Erdos-Renyii over a subset of nodes,
          with a different density as the rest of the
          graph. When using a dataset, we remove some of the "stubs"  of the degree sequence
          to generate the anomaly. We then have a "normal" degree sequence and an "anomaly"
          degree sequence (the sum of the two gives the input dataset degree sequence). When
          only using the model, we simply generate smaller Erdos-Renyii model, respecting the
          total number of interactions. # TODO this changes the density of the "normal" graph
        
        - Time-Serie anomalies are small white noise over a subset of timestamps, with
          different statistics (average, variance) as the rest of the timeserie.
          When using a dataset, we set aside some of the timeserie values (usually the highest)
          to be used as the "anomaly". The sum of the "anomaly" and "normal" timeseries gives the
          input dataset timeserie. #TODO : this changes the statistics of the normal timeserie

  - Stream anomalies are generated in the "Link Stream Generator", in genbip. Stream anomalies are different than 
    graph and timeserie anomalies. by creating a sub-stream using an "anormal" graph and an "anormal" timeserie.
    In the final stream, a "graph anomaly" occurs on a subset of nodes but distributed on all timestamps, 
    a "timeserie anomaly" occurs on a subset of timestamp and distributed on all nodes, and a "stream anomaly" occurs
    on both a subset of nodes and a subset of timestamps. # TODO add plot ?


