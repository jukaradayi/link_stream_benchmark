.. _normality_and_anomalies:

Normality And Anomalies
=======================

* In the benchmark, we define what we call the "normality" state, and the
  "anomaly". When working with models, we call anomaly part of the model
  with overall different properties (e.g. subpart of a graph with different density than the complete graph).
  When working with real datasets, we assume that anomalies are already
  present in the data.

* Anomalies are generated in two steps of the pipeline.

  - Graph and Timeserie anomalies are generated by the "Processor". 
        - Graph anomalies are small Erdos-Renyii over a subset of nodes,
          with a different density as the rest of the
          graph. When using a dataset, we remove some of the "stubs"  of the degree sequence
          to generate the anomaly. We then have a "normal" degree sequence and an "anomaly"
          degree sequence (the sum of the two gives the input dataset degree sequence). When
          only using the model, we simply generate smaller Erdos-Renyii model, respecting the
          total number of interactions. # TODO this changes the density of the "normal" graph
        
        - Time-Serie anomalies are small white noise over a subset of timestamps, with
          different statistics (average, variance) as the rest of the timeserie.
          When using a dataset, we set aside some of the timeserie values (usually the highest)
          to be used as the "anomaly". The sum of the "anomaly" and "normal" timeseries gives the
          input dataset timeserie. #TODO : this changes the statistics of the normal timeserie

* Considering this, when using datasets, we assume anomalies are already
  in the dataset and generate link-stream using the measured weighted graph,
  and the measured timeserie as top and bottom nodes.
  When using models, we use models to generate graphs and timeseries
  (e.g. Erdos-Renyi for graph, or white noise for timeserie), and we 
  add anomalies on top of that.
  For this purpose, we then define two types of anomalies:
    - graph/timeseries anomalies: an anomaly that is present either in 
      the graph or the timeserie but not in both. TODO plot images to clarify 
      TODO explain more .. ? 

    - stream-anomalies an anomaly that is present both in the graph and 
      the timeserie. This means that when generating the link-stream, 
      the edges involved in the graph anomaly are linked to the timestamps
      involved in the timeseries anomaly
      TODO plot
  

